window.onload=function(){var e=document.getElementById("OpenSpeedTest-UI");e.parentNode.replaceChild(e.contentDocument.documentElement,e),ostOnload(),OpenSpeedTest.Start()},function(e){var t,o,n=function(e){e&&"function"==typeof e&&e()};function s(e){if(!(this instanceof s))return new s(e);this.el=document.getElementById(e)}s.prototype.fade=function(e,t,o){var s="in"===e,i=s?0:1,r=14/t,a=this;s&&(a.el.style.display="block",a.el.style.opacity=i);var l=window.setInterval((function(){i=s?i+r:i-r,a.el.style.opacity=i,i<=0&&(a.el.style.display="none"),(i<=0||i>=1)&&window.clearInterval(l,n(o))}),14)};var i=function(e,t,o,n){return e/=n,o*(--e*e*e+1)+t},r=function(){this.YourIP=s("YourIP"),this.ipDesk=s("ipDesk"),this.ipMob=s("ipMob"),this.downSymbolDesk=s("downSymbolDesk"),this.upSymbolDesk=s("upSymbolDesk"),this.upSymbolMob=s("upSymbolMob"),this.downSymbolMob=s("downSymbolMob"),this.settingsMob=s("settingsMob"),this.settingsDesk=s("settingsDesk"),this.oDoLiveStatus=s("oDoLiveStatus"),this.ConnectErrorMob=s("ConnectErrorMob"),this.ConnectErrorDesk=s("ConnectErrorDesk"),this.downResult=s("downResult"),this.upRestxt=s("upRestxt"),this.pingResult=s("pingResult"),this.jitterDesk=s("jitterDesk"),this.pingMobres=s("pingMobres"),this.JitterResultMon=s("JitterResultMon"),this.JitterResultms=s("JitterResultms"),this.UI_Desk=s("UI-Desk"),this.UI_Mob=s("UI-Mob"),this.oDoTopSpeed=s("oDoTopSpeed"),this.startButtonMob=s("startButtonMob"),this.startButtonDesk=s("startButtonDesk"),this.intro_Desk=s("intro-Desk"),this.intro_Mob=s("intro-Mob"),this.loader=s("loading_app"),this.OpenSpeedtest=s("OpenSpeedtest"),this.mainGaugebg_Desk=s("mainGaugebg-Desk"),this.mainGaugeBlue_Desk=s("mainGaugeBlue-Desk"),this.mainGaugeWhite_Desk=s("mainGaugeWhite-Desk"),this.mainGaugebg_Mob=s("mainGaugebg-Mob"),this.mainGaugeBlue_Mob=s("mainGaugeBlue-Mob"),this.mainGaugeWhite_Mob=s("mainGaugeWhite-Mob"),this.oDoLiveSpeed=s("oDoLiveSpeed"),this.progressStatus_Mob=s("progressStatus-Mob"),this.progressStatus_Desk=s("progressStatus-Desk"),this.graphc1=s("graphc1"),this.graphc2=s("graphc2"),this.graphMob2=s("graphMob2"),this.graphMob1=s("graphMob1"),this.text=s("text"),this.scale=[{degree:680,value:0},{degree:570,value:.5},{degree:460,value:1},{degree:337,value:10},{degree:220,value:100},{degree:115,value:500},{degree:0,value:1e3}],this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]};r.prototype.reset=function(){this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]},r.prototype.ip=function(){var e=this;"block"===e.ipDesk.el.style.display?(e.ipDesk.el.style.display="none",e.ipMob.el.style.display="none"):(e.ipDesk.el.style.display="block",e.ipMob.el.style.display="block")},r.prototype.prePing=function(){this.loader.fade("out",500),this.OpenSpeedtest.fade("in",1e3)},r.prototype.app=function(){this.loader.fade("out",500,this.ShowAppIntro())},r.prototype.ShowAppIntro=function(){this.OpenSpeedtest.fade("in",1e3)},r.prototype.userInterface=function(){this.intro_Desk.fade("out",1e3),this.intro_Mob.fade("out",1e3,this.ShowUI())},r.prototype.ShowUI=function(){this.UI_Desk.fade("in",1e3),this.UI_Mob.fade("in",1e3,(function(e){t="Loaded",console.log("Developed by Vishnu. Email --\x3e me@vishnu.pro")}))},r.prototype.Symbol=function(e){0==e&&(this.downSymbolMob.el.style.display="block",this.downSymbolDesk.el.style.display="block",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none"),1==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="block",this.upSymbolDesk.el.style.display="block"),2==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none")},r.prototype.Graph=function(e,t){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var o,n,s=this;if(0===t){var i=this.graphc1.el;o="line",this.graphMob2.el.style.display="none",this.graphMob1.el.style.display="block"}else i=this.graphc2.el,o="line2",this.graphMob1.el.style.display="none",this.graphMob2.el.style.display="block";isNaN(e)?this.values.push(""):this.values.push(e),e>0&&function(e,t){!function(){for(s.maxValue=0,n=0;n<s.values.length;n++)s.values[n]>s.maxValue&&(s.maxValue=s.values[n]);s.maxValue=Math.ceil(s.maxValue)}(),function(){if(s.values.length>1){var e="0,"+s.height+" ";for(n=0;n<s.values.length;n++){var t=s.values[n]/s.maxValue;e+=(130/(s.values.length-1)*n).toFixed(2)+","+(s.height-s.height*t).toFixed(2)+" "}e+="130,"+s.height,s.points=e}}(),function(){for(n=0;n<s.vSteps;n++){var e=Math.ceil(s.maxValue/s.vSteps*(n+1));s.measurements.push(e)}s.measurements.reverse()}();for(var r=document.getElementsByClassName(o);r.length>0;)r[0].remove();s.polygon=document.createElementNS("http://www.w3.org/2000/svg","polygon"),s.polygon.setAttribute("points",s.points),s.polygon.setAttribute("class",o),s.values.length>1&&i.appendChild(s.polygon)}()},r.prototype.progress=function(e,t){var n=this,s=t,r=e,a=Date.now(),l=setInterval((function(){var e=(Date.now()-a)/1e3,t=i(e,400,400,s),u=i(e,400,-400,s);r?(n.progressStatus_Desk.el.style.strokeDashoffset=t,n.progressStatus_Mob.el.style.strokeDashoffset=t):(n.progressStatus_Desk.el.style.strokeDashoffset=u,n.progressStatus_Mob.el.style.strokeDashoffset=u),e>=s&&(clearInterval(l),o="done",n.progressStatus_Desk.el.style.strokeDashoffset=800,n.progressStatus_Mob.el.style.strokeDashoffset=800)}),14)},r.prototype.mainGaugeProgress=function(e){var t=e;t<0&&(t=0);var o=this.getNonlinearDegree(t);e>0&&(this.mainGaugeBlue_Desk.el.style.strokeOpacity=1,this.mainGaugeWhite_Desk.el.style.strokeOpacity=1,this.mainGaugeBlue_Mob.el.style.strokeOpacity=1,this.mainGaugeWhite_Mob.el.style.strokeOpacity=1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1),0==o&&t>1e3?(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o>=681?681:o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o>=681?681:o):0==o&&t<=0&&(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=681.1,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=.1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=.1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=681.1)},r.prototype.showStatus=function(e){this.oDoLiveStatus.el.textContent=e},r.prototype.ConnectionError=function(){this.ConnectErrorMob.el.style.display="block",this.ConnectErrorDesk.el.style.display="block"},r.prototype.uploadResult=function(e){e<1&&(this.upRestxt.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.upRestxt.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="20px"),e>=1e5&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="18px")},r.prototype.pingResults=function(e,t){var o=e;"Ping"===t&&(o>=1&&o<1e4?(this.pingResult.el.textContent=Math.floor(o),this.pingMobres.el.textContent=Math.floor(o)):o>=0&&o<1&&(0==o&&(o=0),this.pingResult.el.textContent=o,this.pingMobres.el.textContent=o)),"Error"===t&&(this.oDoLiveSpeed.el.textContent=o)},r.prototype.downloadResult=function(e){e<1&&(this.downResult.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.downResult.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="20px"),e>=1e5&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="18px")},r.prototype.jitterResult=function(e,t){var o=e;if("Jitter"===t)if(o>=1&&o<1e4){if(this.jitterDesk.el.textContent=Math.floor(o),o>=1&&o<100&&(this.JitterResultMon.el.textContent=Math.floor(o)),o>=100){var n=(o/1e3).toFixed(1);this.JitterResultMon.el.textContent=n+"k"}}else o>=0&&o<1&&(0==o&&(o=0),this.jitterDesk.el.textContent=o,this.JitterResultMon.el.textContent=o)},r.prototype.LiveSpeed=function(e,t){var o=e;if("countDown"!==t){if("speedToZero"===t)return"number"==typeof o&&(o=o.toFixed(1)),o<=0&&(o=0),this.oDoLiveSpeed.el.textContent=o,this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",void(this.oDoTopSpeed.el.style.fill="gray");if("Ping"===t)o>=1&&o<1e4?this.oDoLiveSpeed.el.textContent=Math.floor(o):o>=0&&o<1&&(0==o&&(o=0),this.oDoLiveSpeed.el.textContent=o);else{if(0==o){n=o.toFixed(0);this.oDoLiveSpeed.el.textContent=n}if(o<=1&&o>0){n=o.toFixed(3);this.oDoLiveSpeed.el.textContent=n}if(o>1){n=o.toFixed(1);this.oDoLiveSpeed.el.textContent=n}o<=1e3&&(this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",this.oDoTopSpeed.el.style.fill="gray"),o>=1010&&(this.oDoTopSpeed.el.textContent=1e3*Math.floor(o/1010)+"+",this.oDoTopSpeed.el.style.fill="gray",this.oDoTopSpeed.el.style.fontSize="17.2px")}}else{var n=o.toFixed(0);this.oDoLiveSpeed.el.textContent=n}},r.prototype.GaugeProgresstoZero=function(e,o){var n=e,s=this;if(n>=0)var i=Date.now(),r=0-n,a=setInterval((function(){var e,l=(Date.now()-i)/1e3,u=(e=l,e/=3,r*(--e*e*e*e*e+1)+n);s.LiveSpeed(u,"speedToZero"),s.mainGaugeProgress(u),(l>=3||u<=0)&&(clearInterval(a),s.LiveSpeed(0,"speedToZero"),s.mainGaugeProgress(0),t=o)}),16)},r.prototype.getNonlinearDegree=function(e){var t=0;if(0==e||e<=0||isNaN(e))return 0;for(;t<this.scale.length;){if(!(e>this.scale[t].value))return this.scale[t-1].degree+(e-this.scale[t-1].value)*(this.scale[t].degree-this.scale[t-1].degree)/(this.scale[t].value-this.scale[t-1].value);t++}return this.scale[this.scale.length-1].degree};var a=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed};a.prototype.reset=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed=0},a.prototype.ArraySum=function(e){return e?e.reduce((function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t}),0):0},a.prototype.AvgSpeed=function(e,t,o){var n=this;this.timeNow=(window.performance.now()-this.OverAllTimeAvg)/1e3,this.FinalSpeed;var s=t;return s=o-s,this.timeNow>=s&&(e>0&&this.SpeedSamples.push(e),n.FinalSpeed=n.ArraySum(n.SpeedSamples)/n.SpeedSamples.length),n.FinalSpeed},a.prototype.uRandom=function(e,t){var o=new Uint32Array(262144);function s(){for(var e=o.length,t=0;t<e;t++)o[t]=4294967296*Math.random();return o}var i=[];return new Blob(function(e){for(var t=0;t<e;t++)i[t]=s();return i}(e),{type:"application/octet-stream"},n(t))},a.prototype.addEvt=function(e,t,o){e.addEventListener(t,o)},a.prototype.remEvt=function(e,t,o){e.removeEventListener(t,o)};var l=function(){var e,n=new a,s=new r;s.app();var i,l,u,p,d,h,f,g,c,y,v,m,S,D,w,b,k,M=location.hostname,x=[],T=0,C=0,R=0,L=0;function I(){0,0,v=0,R=0}k=window.navigator.userAgent?window.navigator.userAgent:"Not Found";var E=.6*ulDuration,G=.6*dlDuration;.6*ulDuration>=7&&(E=7),.6*dlDuration>=7&&(G=7);var _=!0,F=!0;n.addEvt(s.settingsMob.el,"click",ne),n.addEvt(s.settingsDesk.el,"click",ne),n.addEvt(s.startButtonDesk.el,"click",se),n.addEvt(s.startButtonMob.el,"click",se),n.addEvt(document,"keypress",le);var P,A,B,O,N=!0,U=function(e){var t={},o=document.createElement("a");o.href=e;for(var n=o.search.substring(1).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");t[i[0]]=decodeURIComponent(i[1])}return t}(window.location.href.toLowerCase());setPingSamples&&("string"!=typeof U.ping&&"string"!=typeof U.p||(void 0!==U.ping?P=U.ping:void 0!==U.p&&(P=U.p),P>0&&(pingSamples=P,pingSamples=P)));setPingTimeout&&("string"!=typeof U.out&&"string"!=typeof U.o||(void 0!==U.out?A=U.out:void 0!==U.o&&(A=U.o),A>1&&(pingTimeOut=A,pingTimeOut=A)));setHTTPReq&&("string"!=typeof U.xhr&&"string"!=typeof U.x||(void 0!==U.xhr?B=U.xhr:void 0!==U.x&&(B=U.x),B>0&&B<=32&&(dlThreads=B,ulThreads=B)));selectServer&&("string"!=typeof U.host&&"string"!=typeof U.h||(void 0!==U.host?O=U.host:void 0!==U.h&&(O=U.h),/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(O)&&(openSpeedTestServerList=[{ServerName:"Home",Download:O+"/downloading",Upload:O+"/upload",ServerIcon:"DefaultIcon"}])));var j,H,W=parseInt(U.stress),z=parseInt(U.s);"string"==typeof U.stress?(j=U.stress,H=W):"string"==typeof U.s&&(j=U.s,H=z),j&&stressTest&&("low"!==j&&"l"!==j||(dlDuration=300,ulDuration=300),"medium"!==j&&"m"!==j||(dlDuration=600,ulDuration=600),"high"!==j&&"h"!==j||(dlDuration=900,ulDuration=900),"veryhigh"!==j&&"v"!==j||(dlDuration=1800,ulDuration=1800),"extreme"!==j&&"e"!==j||(dlDuration=3600,ulDuration=3600),"day"!==j&&"d"!==j||(dlDuration=86400,ulDuration=86400),"year"!==j&&"y"!==j||(dlDuration=31557600,ulDuration=31557600),(W>12||z>12)&&(dlDuration=H,ulDuration=H));var J=parseInt(U.clean),q=parseInt(U.c),V=1;J?V=J:q&&(V=q),enableClean&&("string"!=typeof U.clean&&"string"!=typeof U.c||(J>=1||q>=1?(J<5||q<5)&&(upAdjust=1+V/100,dlAdjust=1+V/100):(upAdjust=1,dlAdjust=1)));var Z,X=parseInt(U.run),Y=parseInt(U.r);enableRun&&("string"!=typeof U.run&&"string"!=typeof U.r||(Z=X>0?X:Y>0?Y:0)),Z>=0&&_&&se();var K,Q=U.test,$=U.t,ee=!1;selectTest&&("string"!=typeof Q&&"string"!=typeof $||(Q?(K=Q,ee=Q):$&&(K=$,ee=$),"download"===K||"d"===K?(p=0,h=0,ee="Download",_&&se()):"upload"===K||"u"===K?(u=0,d=0,ee="Upload",L=1,_&&se()):"ping"===K||"p"===K?(p=0,h=0,u=0,d=0,ee="Ping",_&&se()):ee=!1));var te=0;var oe=!1;function ne(){oe&&(s.YourIP.el.textContent="Please wait..",Je(7),oe=!1),s.ip()}function se(){if(N&&(n.remEvt(s.settingsMob.el,"click",ne),n.remEvt(s.settingsDesk.el,"click",ne),n.remEvt(s.startButtonDesk.el,"click",se),n.remEvt(s.startButtonMob.el,"click",se),n.remEvt(document,"keypress",le),N=!1),Z>=0){_=!1,s.userInterface(),F=!1;var e=Math.ceil(Math.abs(Z));s.showStatus("Automatic Test Starts in ...");var t=setInterval((function(){e>=1?(e-=1,s.LiveSpeed(e,"countDown")):e<=0&&(clearInterval(t),_=!0,Z=void 0,se())}),1e3)}"fetch"===openSpeedTestServerList&&!0===_&&(_=!1,s.showStatus("Fetching Server Info.."),Je(6)),!0===_&&("Ping"===ee||"Download"===ee||"Upload"===ee||!1===ee)&&pe()}var ie="OpenSpeedTest",re=".com",ae=ie+"™";function le(e){"Enter"===e.key&&se()}var ue=0;function pe(){F&&(s.userInterface(),F=!1),function(){"widget"!==openChannel&&"web"!==openChannel||Je(1);function i(){w=window.performance.now(),function(){for(var e=0;e<ulThreads;e++)setTimeout((function(e){Oe(e)}),ulDelay*e,e)}()}var r=setInterval((function(){if("Loaded"===t&&(t="busy",ze()),"Ping"===t&&(t="busy",s.showStatus("Milliseconds")),"Download"===t&&(s.showStatus("Initializing.."),n.reset(),I(),s.reset(),D=window.performance.now(),function(){for(var e=0;e<dlThreads;e++)setTimeout((function(e){Ge(e)}),dlDelay*e,e)}(),t="initDown"),"Downloading"===t){if(s.Symbol(0),0==te){te=1,s.showStatus("Testing download speed..");var a=(window.performance.now()-D)/1e3;de=a,s.progress(1,dlDuration+2.5),dlDuration+=a}S=(window.performance.now()-D)/1e3,Ee("dl"),s.showStatus("Mbps download"),s.mainGaugeProgress(R),s.LiveSpeed(R),s.Graph(R,0),u=n.AvgSpeed(R,G,dlDuration),S>=dlDuration&&"done"==o&&(ee?(s.GaugeProgresstoZero(R,"SendR"),s.showStatus("All done"),s.Symbol(2)):s.GaugeProgresstoZero(R,"Upload"),s.downloadResult(u),d=T,L=1,t="busy",I(),n.reset())}if("Upload"==t&&1===L&&(s.Symbol(1),t="initup",s.showStatus("Initializing.."),s.LiveSpeed("...","speedToZero"),e=n.uRandom(ulDataSize,i),ee&&(te=1)),"Uploading"===t){if(1==te){te=2,s.showStatus("Testing upload speed.."),R=0,n.reset(),s.reset();var l=(window.performance.now()-w)/1e3;he=l,s.progress(!1,ulDuration+2.5),ulDuration+=l}s.showStatus("Mbps upload"),m=(window.performance.now()-w)/1e3,Ee("up"),s.mainGaugeProgress(R),s.LiveSpeed(R),s.Graph(R,1),p=n.AvgSpeed(R,E,ulDuration),m>=ulDuration&&1==L&&(h=C,s.uploadResult(p),s.GaugeProgresstoZero(R,"SendR"),e=void 0,s.showStatus("All done"),s.Symbol(2),t="busy",L=0)}if("Error"===t){s.showStatus("Check your network connection status."),s.ConnectionError(),t="busy",clearInterval(r);var c=(v=document.createElement("div")).querySelector("a");s.oDoLiveSpeed.el.textContent="Network Error";var y=document.getElementById("oDoLiveSpeed");c.innerHTML=y.innerHTML,y.innerHTML=v.innerHTML}if("SendR"===t){s.showStatus("All done");var v;c=(v=document.createElement("div")).querySelector("a");s.oDoLiveSpeed.el.textContent=ae;y=document.getElementById("oDoLiveSpeed");if(c.innerHTML=y.innerHTML,y.innerHTML=v.innerHTML,location.hostname!=ie.toLowerCase()+re){b="https://"+ie.toLowerCase()+re+"/results/show.php?&d="+u.toFixed(3)+"&u="+p.toFixed(3)+"&p="+f+"&j="+g+"&dd="+(d/1048576).toFixed(3)+"&ud="+(h/1048576).toFixed(3)+"&ua="+k,b=encodeURI(b);var M=document.getElementById("resultsData");M.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b),M.setAttribute("target","_blank"),saveData&&Je(5)}else Je(3);t="busy",clearInterval(r)}}),100)}()}"web"===openChannel&&(ue=webRe,oe=!0),"widget"===openChannel&&(ue=widgetRe,oe=!0),"selfwidget"===openChannel&&(ue=widgetRe,l=domainx,M=l),openChannel;var de,he,fe,ge,ce=0,ye=0,ve=0,me=0,Se=0,De=0,we=0,be=0,ke=0,Me=0,xe=0,Te=0,Ce=0,Re=0,Le=1e3*dlDuration-6e3,Ie=1e3*ulDuration-6e3;function Ee(e){if("dl"===e){var t=1e3*S;t>1e3*de+G/2*1e3&&0===we&&(we=1,De*=.01,ve*=.01,fe=t+1e4),t>=fe&&fe<Le&&(fe+=1e4,De*=.01,ve*=.01),ce=T<=0?0:T-ye,ye=T,me=Se=t-Se,Se=t,De+=me,(ve+=ce)>0&&(v=ve/De/125*upAdjust,R=v)}if("up"===e){var o=1e3*m;o>1e3*he+E/2*1e3&&0===Re&&(Re=1,Ce*=.1,Me*=.1,ge=o+1e4),o>=ge&&ge<Ie&&(ge+=1e4,Ce*=.1,Me*=.1),be=C<=0?0:C-ke,ke=C,xe=Te=o-Te,Te=o,Ce+=xe,(Me+=be)>0&&(v=Me/Ce/125*upAdjust,R=v)}}function Ge(e){var o=0,n=new XMLHttpRequest;x[e]=n,x[e].open("GET",_e.Download+"?n="+Math.random(),!0),x[e].onprogress=function(n){if(1===L)return x[e].abort(),x[e]=null,x[e]=void 0,delete x[e],!1;"initDown"==t&&(t="Downloading");var s=n.loaded<=0?0:n.loaded-o;if(isNaN(s)||!isFinite(s)||s<0)return!1;T+=s,o=n.loaded},x[e].onload=function(n){0===o&&(T+=n.total),"initDown"==t&&(t="Downloading"),x[e]&&(x[e].abort(),x[e]=null,x[e]=void 0,delete x[e]),0===L&&Ge(e)},x[e].onerror=function(t){0===L&&Ge(e)},x[e].responseType="arraybuffer",x[e].send()}var _e,Fe,Pe,Ae,Be=[];function Oe(o){var n=0,s=new XMLHttpRequest;Be[o]=s,Be[o].open("POST",_e.Upload+"?n="+Math.random(),!0),Be[o].upload.onprogress=function(e){"initup"==t&&(t="Uploading");if(m>=ulDuration)return Be[o].abort(),Be[o]=null,Be[o]=void 0,delete Be[o],!1;var s=e.loaded<=0?0:e.loaded-n;if(isNaN(s)||!isFinite(s)||s<0)return!1;C+=s,n=e.loaded},Be[o].onload=function(){if(0===n&&(C+=1048576*ulDataSize,m>=ulDuration))return Be[o].abort(),Be[o]=null,Be[o]=void 0,delete Be[o],!1;"initup"==t&&(t="Uploading");Be[o]&&(Be[o].abort(),Be[o]=null,Be[o]=void 0,delete Be[o]),1===L&&Oe(o)},Be[o].onerror=function(e){m<=ulDuration&&Oe(o)},Be[o].setRequestHeader("Content-Type","application/octet-stream"),o>0&&C<=17e3||Be[o].send(e)}var Ne=-1,Ue=[],je=[],He=[],We=openSpeedTestServerList.length;function ze(){if(We=openSpeedTestServerList.length,t="Ping",performance.clearResourceTimings(),Ne<We-1)Ne++,"Stop"!=Ae&&function(e,t){var o=0,n=[],i=[];function r(){if(o<pingSamples)o++,"Stop"!=Ae&&a();else if(n.length>1){i.sort((function(e,t){return e-t}));var s=(i=(i=i.slice(0,i.length*jitterFinalSample)).reduce((function(e,t){return e+t}),0)/i.length).toFixed(1),r=Math.min.apply(Math,n);Ue.push(r),je.push(e),He.push(s),"function"==typeof t&&t()}else"function"==typeof t&&t()}function a(){var t=new XMLHttpRequest;"Stop"!=Ae&&t.abort(),t.open(pingMethod,e[pingFile]+"?n="+Math.random(),!0),t.timeout=pingTimeOut;var a=window.performance.now();t.send(),t.onload=function(){if(200===this.status&&4===this.readyState){var e,t=Math.floor(window.performance.now()-a),l=performance.getEntries();if(e="xmlhttprequest"===(l=l[l.length-1]).initiatorType?parseFloat(l.duration.toFixed(1)):t,o>250&&(e=t),e<=0?(.1,n.push(.1)):(e,n.push(e)),n.length>1){var u=Math.abs(n[n.length-1]-n[n.length-2]).toFixed(1);i.push(parseFloat(u)),u,s.LiveSpeed(e,"Ping"),s.pingResults(e,"Ping"),s.jitterResult(u,"Jitter")}r()}404===this.status&&4===this.readyState&&(o++,r())},t.onerror=function(e){o++,r()},t.ontimeout=function(e){o++,r()}}a()}(openSpeedTestServerList[Ne],ze);else if(je.length>=1){var e=Math.min.apply(Math,Ue),o=Ue.indexOf(e);_e=je[o],Fe=e,Pe=He[o],Ae="Busy",s.LiveSpeed(Fe,"Ping"),s.pingResults(Fe,"Ping"),s.jitterResult(Pe,"Jitter"),f=Fe,g=Pe,t=ee?"Ping"==ee?"SendR":ee:"Download"}else je.Download||(t="Error")}var Je=function(e){var t=new XMLHttpRequest,o=OpenSpeedTestdb;1==e&&(o=webIP),5==e&&(o=saveDataURL),7==e&&(o=get_IP),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(y=t.responseText.trim(),2==e&&(i=y),1==e&&(l=y),3==e&&setTimeout((function(){location.href=ue+y}),1500),6==e&&(openSpeedTestServerList=JSON.parse(y),_=!0,se()),7==e&&(s.YourIP.el.textContent=y))},2==e&&(c="r=n"),3==e&&(c="r=l&d="+u+"&u="+p+"&dd="+d/1048576+"&ud="+h/1048576+"&p="+f+"&do="+M+"&S="+i+"&sip="+l+"&jit="+g+"&ua="+k),5==e&&(c=b),6==e&&(c="r=s"),t.send(c)}};e.Start=function(){new l}}(window.OpenSpeedTest=window.OpenSpeedTest||{});